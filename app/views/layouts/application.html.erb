<!DOCTYPE html>
<html>
	<head>
	  <title><%= full_title(yield(:title)) %></title>
	  <%= stylesheet_link_tag    "application", media: "all", "data-turbolinks-track" => true %>
	  <%= javascript_include_tag "application", "data-turbolinks-track" => true %>
	  <%= csrf_meta_tags %>

	  <meta charset="utf-8">
	  <meta http-equiv="X-UA-Compatible" content="IE=edge">
	  <meta name="viewport" content="width=device-width, initial-scale=1.0">
	  <meta name="description" content="UvA-Courses WebApp">
	  <meta name="author" content="Jaap">

	  <%= favicon_link_tag "uva.gif" %>

	  <!-- HTML5 shim and Respond.js IE8 support of HTML5 elements and media queries -->
	  <!--[if lt IE 9]>
	    <script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
	    <script src="https://oss.maxcdn.com/libs/respond.js/1.3.0/respond.min.js"></script>
	  <![endif]-->
	</head>

	<body>
	<!-- Wrap all page content here -->
    <div id="wrap">

      <!-- Fixed navbar -->
      <div class="navbar navbar-default navbar-fixed-top" role="navigation">
        <div class="container">
          <div class="navbar-header">
            <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".navbar-collapse">
              <span class="sr-only">Toggle navigation</span>
              <span class="icon-bar"></span>
              <span class="icon-bar"></span>
              <span class="icon-bar"></span>
            </button>
            <%= link_to "UvA Courses", root_path, class: "navbar-brand" %>
          </div>
          <div class="collapse navbar-collapse">
            <ul class="nav navbar-nav">
              <li class="<%= 'active' if params[:action] == 'home' %>"><%= link_to "Home", root_path %></li>
	          	<li class="<%= 'active' if params[:action] == 'help' %>"><%= link_to "Help", help_path %></li>
							<li class="dropdown <%= 'active' if params[:controller] == 'browse_courses' %>">
                <a href="#" class="dropdown-toggle" data-toggle="dropdown">Browse <b class="caret"></b></a>
                <ul class="dropdown-menu">
                  <li class="<%= 'active' if params[:controller] == 'browse_courses' && params[:type] == 'courses' %>">
                  	<%= link_to 'Courses', controller: 'browse_courses', action: 'index', type: 'courses' %>
                  </li>
                  <li class="<%= 'active' if params[:controller] == 'browse_courses' && params[:type] == 'institutes' %>">
                  	<%= link_to 'Institutes', controller: 'browse_courses', action: 'index', type: 'institutes' %>
                  </li>
                  <li class="<%= 'active' if params[:controller] == 'browse_courses' && params[:type] == 'programmes' %>">
                  	<%= link_to 'Programmes', controller: 'browse_courses', action: 'index', type: 'programmes' %>
                  </li>
                  <li class="<%= 'active' if params[:controller] == 'browse_courses' && params[:type] == 'staff' %>">
                  	<%= link_to 'Staff', controller: 'browse_courses', action: 'index', type: 'staff' %>
                  </li>
                  <li>
                </ul>
              </li>
            </ul>
            
            <div class="col-sm-3 col-md-3">
              <%= form_tag({controller: 'search', action: 'index'}, method: 'get', class: 'navbar-form') do %>
                <div class="input-group">
                  <%= text_field_tag :q, params[:q], class: 'form-control', placeholder: 'Search' %>
                  <div class="input-group-btn">
                    <%= button_tag(name: nil, class: 'btn btn-primary') do %>
                      <span class="glyphicon glyphicon-search"></span>
                    <% end %>
                  </div>
                </div>
              <% end %>
            </div>
            
            <ul class="nav navbar-nav navbar-right">
							<% if signed_in? %>
								<% if current_user.admin? %>
									<li class="dropdown <%= 'active' if params[:controller] == 'users' && params[:action] == 'index' %>">
		                <a href="#" class="dropdown-toggle" data-toggle="dropdown">Admin <b class="caret"></b></a>
		                <ul class="dropdown-menu">
		                  <li class="dropdown <%= 'active' if params[:controller] == 'users' && params[:action] == 'index' %>">
		                  	<%= link_to users_path do %>
		                  		<span class="glyphicon glyphicon-user"></span> Users
		                  	<% end %>
		                  </li>
		                </ul>
		              </li>
		            <% end %>
	              <li class="dropdown <%= 'active' if !params[:tab].nil? %>">
	                <a href="#" class="dropdown-toggle" data-toggle="dropdown">Account <b class="caret"></b></a>
	                <ul class="dropdown-menu">
	                	<li class="<%= 'active' if params[:tab] == 'recent' %>">
	                		<%= link_to user_path(current_user.id, tab: 'recent') do %>
  											<span class="glyphicon glyphicon-eye-open"></span> Recently viewed
  										<% end %>
	                	</li>
  									<li class="<%= 'active' if params[:tab] == 'current' %>">
  										<%= link_to user_path(current_user.id, tab: 'current') do %>
  											<span class="glyphicon glyphicon-check"></span> Current courses
  										<% end %>
  									</li>
  									<li class="<%= 'active' if params[:tab] == 'shop' %>">
  										<%= link_to user_path(current_user.id, tab: 'shop') do %>
  											<span class="glyphicon glyphicon-shopping-cart"></span> Shopping cart
  										<% end %>
  									</li>
	                  <li class="divider"></li>
	                  <li class="<%= 'active' if params[:tab] == 'settings' %>">
	                  	<%= link_to user_path(current_user.id, tab: 'settings') do %>
	                  		<span class="glyphicon glyphicon-cog"></span> Settings
	                  	<% end %>
	                  </li>
	                  <li class="divider"></li>
	                  <li>
	                  	<%= link_to signout_path, method: "delete" do %>
	                  		<span class="glyphicon glyphicon-off"></span> Sign out
	                  	<% end %>
	                  </li>
	                </ul>
	              </li>
	            <% else %>
	            	<li class="<%= 'active' if params[:controller] == 'sessions' && params[:action] == 'new' %>">
	            		<%= link_to "Sign in", signin_path %>
	            	</li>
	            <% end %>
            </ul>
          </div><!--/.nav-collapse -->
        </div>
      </div>

      <!-- Begin page content -->
      <div class="container">
				<% flash.each do |key, value| %>
	  			<%= content_tag(:div, value, class: "alert alert-#{key}") %>
				<% end %>

				<%= yield %>

		    <%= debug(params) if Rails.env.development? %>

      </div>
    </div>

    <div id="footer">
      <div class="container">
        <p class="text-muted"> </p>
        <ul class="footer-links">
          <li>Currently v0.0.1</li>
          <li class="muted">&middot;</li>
          <li><%= link_to "Contact", contact_path %></li>
          <li class="muted">&middot;</li>
					<li><%= link_to "About", about_path %></li>
          <li class="muted">&middot;</li>
          <li><a href="https://github.com/jaapwijnen/uva_courses">Releases</a></li>
        </ul>
      </div>
    </div>
	</body>
</html>



